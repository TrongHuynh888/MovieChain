/* --- GLOBAL RESET: CH·ªêNG V·ª† GIAO DI·ªÜN --- */
* {
  box-sizing: border-box !important;
}
/* Ch·ªëng tr√†n - nh∆∞ng lo·∫°i tr·ª´ nav */
body, .page, .section, .hero, .movie-grid, .footer, main {
  max-width: 100vw !important;
}
/* ============================================
   RESPONSIVE.CSS - FINAL FIX (BANNER, FOOTER, POPUP)
   ============================================ */
/* --- FIX L·ªñI 2 TRANG ƒê√à NHAU (QUAN TR·ªåNG) --- */
.hidden {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  height: 0 !important;
  width: 0 !important;
  pointer-events: none !important;
}

/* FIX GLOBAL: N√öT ƒêƒÇNG NH·∫¨P KH√îNG B·ªä CH√àN √âP */
#loginBtn {
  white-space: nowrap !important;
  flex-shrink: 0 !important;
  min-width: 100px !important;
  padding: 8px 16px !important;
  overflow: visible !important;
}
#loginBtn span {
  white-space: nowrap !important;
}
.nav-actions {
  flex-shrink: 0 !important;
  flex-wrap: nowrap !important;
  gap: 8px !important;
}
.nav-menu {
  flex-shrink: 1 !important; /* Menu co l·∫°i khi thi·∫øu ch·ªó */
  min-width: 0 !important;
  gap: 4px !important;
}
.nav-menu .nav-link {
  white-space: nowrap !important;
  padding: 6px 8px !important;
  font-size: 13px !important;
}

/* 1. TABLET (iPad) */
@media (max-width: 1366px) {
  .nav-container,
  .section,
  .footer-content {
    padding-left: 20px !important;
    padding-right: 20px !important;
  }

  /* --- FIX POPUP CHO TABLET (iPad) --- */
  /* CH·ªà √ÅP D·ª§NG T·ª™ 769px ƒê·∫æN 1366px (Tablet) - KH√îNG ·∫¢NH H∆Ø·ªûNG MOBILE */
  @media (min-width: 769px) {
    /* ·∫®n popup hover m·∫∑c ƒë·ªãnh (ƒë·ªÉ d√πng click) */
    .movie-card-wrapper .movie-popup-nfx {
      display: none !important;
    }

    /* Class k√≠ch ho·∫°t popup khi ch·∫°m */
    .movie-card-wrapper.active-mobile {
      z-index: 5000 !important;
      position: relative;
    }

    .movie-card-wrapper.active-mobile .movie-popup-nfx {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
      pointer-events: auto !important;
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);

      /* K√≠ch th∆∞·ªõc cho Tablet (R·ªông h∆°n Mobile x√≠u) */
      width: 450px !important; /* User th√≠ch 450px */
      max-width: 90vw !important;
      height: auto;
      z-index: 5001;
      box-shadow: 0 0 40px rgba(0, 0, 0, 0.95);
      border: 1px solid var(--accent-primary);
      background: #1f1f2e !important;
      color: #fff !important;
    }

    /* Font ch·ªØ Popup Tablet */
    .movie-card-wrapper.active-mobile .popup-header-img {
      height: 250px !important;
    }
    .movie-card-wrapper.active-mobile .popup-body {
      padding: 24px !important;
    }
    .movie-card-wrapper.active-mobile .popup-title-new {
      font-size: 24px !important;
      margin-bottom: 12px;
      line-height: 1.3;
      color: #ffeb3b !important;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
      font-weight: 800 !important;
    }
    .movie-card-wrapper.active-mobile .popup-meta-row {
      font-size: 15px !important;
      gap: 10px;
      margin-bottom: 20px;
    }
    .movie-card-wrapper.active-mobile .popup-meta-row span {
      color: #0fceeb !important;
    }
    .movie-card-wrapper.active-mobile .btn-popup-play {
      font-size: 16px !important;
      padding: 12px 24px;
      height: 48px;
    }
    .movie-card-wrapper.active-mobile .btn-popup-icon {
      width: 48px;
      height: 48px;
      font-size: 18px;
      background: rgba(255, 255, 255, 0.15) !important;
      color: #fff !important;
      border: 1px solid rgba(255, 255, 255, 0.3) !important;
    }
    
    /* --- SMART POSITIONING (X·ª¨ L√ù TR√ÄN M√ÄN H√åNH) --- */
    /* 1. M·ªü sang ph·∫£i (Khi th·∫ª ·ªü l·ªÅ tr√°i) */
    .movie-card-wrapper.active-mobile.popup-align-left .movie-popup-nfx {
        left: 0 !important;
        transform: translateX(0) !important;
        transform-origin: left center;
    }

    /* 2. M·ªü sang tr√°i (Khi th·∫ª ·ªü l·ªÅ ph·∫£i) */
    .movie-card-wrapper.active-mobile.popup-align-right .movie-popup-nfx {
        left: auto !important;
        right: 0 !important;
        transform: translateX(0) !important;
        transform-origin: right center;
    }
    
    .movie-card-wrapper.active-mobile .popup-genres-row {
      display: none;
    }
  }

  /* FIX MENU TABLET: Scroll ngang m∆∞·ª£t m√† */
  .nav-menu {
    overflow-x: auto !important;
    overflow-y: hidden !important;
    white-space: nowrap !important;
    justify-content: flex-start !important;
    min-width: 0 !important;
    padding-bottom: 0 !important; /* B·ªè padding bottom th·ª´a */
    padding-right: 60px !important; /* TƒÉng padding ƒë·ªÉ n√∫t Admin kh√¥ng b·ªã che */
    /* mask-image removed ƒë·ªÉ tr√°nh l·ªói ·∫©n icon cu·ªëi c√πng */
    
    /* ·∫®n thanh cu·ªôn nh∆∞ng v·∫´n scroll ƒë∆∞·ª£c (UX hi·ªán ƒë·∫°i) */
    scrollbar-width: none; 
    -ms-overflow-style: none;
  }
  .nav-menu::-webkit-scrollbar {
    display: none;
  }
  .nav-menu .nav-link {
    flex-shrink: 0 !important;
  }

  /* FIX PADDING CHO TABLET: Tr√°nh b·ªã che header v√† full chi·ªÅu cao */
  /* Ch·ªâ √°p d·ª•ng cho Tablet th·ª±c s·ª± (>768px), KH√îNG ·∫£nh h∆∞·ªüng mobile */
  @media (min-width: 769px) {
    .page {
      min-height: 80vh !important;
      padding-top: 100px !important;
    }
  }
  
  /* Ri√™ng Tablet d·ªçc (iPad Portrait) c·∫ßn padding nhi·ªÅu h∆°n */
  @media (min-width: 769px) and (orientation: portrait) {
    .page {
      padding-top: 160px !important;
    }
    .footer {
      margin-top: auto !important;
    }
  }
}

/* --- REDESIGN LOGIN BUTTON (GLOBAL) --- */
/* Quay v·ªÅ style g·ªëc (Gradient) nh∆∞ng bo tr√≤n v√† ƒë·∫£m b·∫£o kh√¥ng b·ªã m√©o */
#loginBtn {
  border-radius: 50px !important; /* Bo tr√≤n vi√™n thu·ªëc */
  white-space: nowrap !important;
  flex-shrink: 0 !important;
  box-shadow: 0 0 15px rgba(229, 9, 20, 0.4) !important; /* B√≥ng ƒë·ªè nh·∫π ƒë√∫ng style */
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
}
#loginBtn span {
  white-space: nowrap !important;
  font-weight: 600 !important;
}

/* 2. MOBILE (ƒêi·ªán tho·∫°i) */
@media (max-width: 768px) {
  :root {
    --font-hero: 28px;
    --font-xxl: 20px;
    --font-xl: 18px;
  }

  /* --- A. HEADER (FIX M√ÄU N√öT & HI·ªÜN ICON THEME) --- */
  /* --- A. HEADER (FIX LIGHT MODE: ICON T·ª∞ ƒê·ªîI M√ÄU) --- */
  /* --- A. HEADER (FINAL: FIX L·ªñI CH·ªíNG ICON) --- */
  .nav-container {
    padding: 5px 8px !important;
    gap: 4px;
    height: 60px;
    z-index: 2000;
    justify-content: space-between !important;
    background: var(--bg-primary) !important;
  }

  /* FIX PADDING PAGE MOBILE (Tr√°nh kho·∫£ng ƒëen th·ª´a do rule tablet 100px) */
  .page {
    padding-top: 60px !important;
    min-height: 100vh !important;
    background: var(--bg-primary) !important;
  }

  /* 1. Logo */
  .nav-logo {
    display: flex !important;
    align-items: center;
    gap: 4px;
    flex: 1; /* T·ª± ƒë·ªông chi·∫øm kho·∫£ng tr·ªëng th·ª´a b√™n tr√°i */
    min-width: 0;
    margin-right: 5px;
  }
  .nav-logo i {
    font-size: 18px !important;
    color: #e50914 !important;
    flex-shrink: 0;
  }
  .nav-logo span {
    display: block !important;
    font-size: 13px !important;
    font-weight: 700 !important;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    color: var(--text-primary) !important;
  }

  /* 2. Nh√≥m n√∫t b√™n ph·∫£i (Ch·ª©a t·∫•t c·∫£ icon) */
  .nav-actions {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    flex-shrink: 0;
    flex-wrap: nowrap !important;
  }
  .nav-utilities {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    flex-shrink: 0 !important;
  }

  /* üëá [FIX QUAN TR·ªåNG] H·ªôp ch·ª©a Login + Avatar ph·∫£i l√† h√†ng ngang */
  #authContainer {
    display: flex !important;
    align-items: center !important;
    flex-direction: row !important;
    gap: 8px !important;
    margin: 0 !important;
  }

  .wallet-btn,
  #connectWalletBtn,
  .theme-toggle,
  .mobile-menu-toggle {
    width: 32px !important;
    height: 32px !important;
    padding: 0 !important;
    margin: 0 !important;
    border-radius: 50% !important;
    display: flex !important;
    align-items: center;
    justify-content: center;
    font-size: 0 !important;
    background: rgba(128, 128, 128, 0.15) !important;
    border: 1px solid rgba(128, 128, 128, 0.1) !important;
    color: var(--text-primary) !important;
    flex-shrink: 0 !important;
  }
  .wallet-btn i,
  #connectWalletBtn i,
  .theme-toggle i,
  .mobile-menu-toggle i {
    margin: 0 !important;
    font-size: 14px !important;
    color: var(--text-primary) !important;
    display: block !important;
  }
  .wallet-btn span,
  .wallet-btn .wallet-btn-text,
  #connectWalletBtn span {
    display: none !important;
  }

  /* FIX: Dropdown (Select) kh√¥ng b·ªã tr√†n m√†n h√¨nh */
  .form-select {
    max-width: 100% !important;
    white-space: nowrap;
    
    /* Cho ph√©p cu·ªôn ngang n·∫øu ch·ªØ qu√° d√†i thay v√¨ c·∫Øt b·ªõt */
    overflow-x: auto !important; 
    text-overflow: unset !important;
  }
  
  /* 4. LOGIC X·ª¨ L√ù N√öT ƒêƒÇNG NH·∫¨P */
  /* Tr∆∞·ªùng h·ª£p 1: Ch∆∞a ƒëƒÉng nh·∫≠p - Icon tr√≤n gi·ªëng avatar */
  #loginBtn {
    width: 32px !important;
    height: 32px !important;
    padding: 0 !important;
    border-radius: 50% !important;
    display: flex !important;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #e50914 0%, #ff0055 100%) !important;
    box-shadow: 0 2px 10px rgba(229, 9, 20, 0.4);
    border: none !important;
    min-width: unset !important;
  }
  #loginBtn i {
    font-size: 14px !important;
    margin: 0 !important;
    color: #fff !important;
  }
  #loginBtn span {
    display: none !important;
  }

  /* Tr∆∞·ªùng h·ª£p 2: ƒê√£ ƒëƒÉng nh·∫≠p (Avatar hi·ªán) */
  #authContainer:has(#userMenuTrigger:not(.hidden)) #loginBtn {
    width: 30px !important;
    height: 30px !important;
    padding: 0 !important;
    border-radius: 50% !important;
    justify-content: center !important;
    background: linear-gradient(135deg, #e50914 0%, #ff0055 100%) !important;
    display: flex !important;
    margin-right: 0 !important;
  }
  #authContainer:has(#userMenuTrigger:not(.hidden)) #loginBtn span {
    display: none !important;
  }
  #authContainer:has(#userMenuTrigger:not(.hidden)) #loginBtn i {
    margin: 0 !important;
    font-size: 14px !important;
  }

  /* 5. AVATAR USER */
  #userMenuTrigger {
    width: 32px !important;
    height: 32px !important;
    border-radius: 50% !important;
    overflow: hidden;
    border: 1.5px solid #f02c3c !important;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0 !important;
    margin: 0 !important;
  }
  .nav-user-avatar,
  #userMenuTrigger img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
  }

  /* 6. Menu tr∆∞·ª£t - C·∫£i thi·ªán UX mobile */
  .nav-menu {
    position: fixed;
    top: 60px;
    right: 0;
    width: 100%;
    height: calc(100dvh - 60px);
    background: var(--bg-primary);
    display: flex !important;
    flex-direction: column !important;
    align-items: stretch !important;
    /* Override tablet rules (padding-right:60px, white-space:nowrap) */
    padding: 10px 0 30px !important;
    white-space: normal !important;
    overflow-x: hidden !important;
    overflow-y: auto !important;
    transform: translateX(100%);
    transition: transform 0.3s ease;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    z-index: 1999;
    visibility: hidden;
    pointer-events: none;
  }
  .nav-menu.active {
    transform: translateX(0);
    visibility: visible;
    pointer-events: auto;
  }
  .nav-menu .nav-link {
    width: 100% !important;
    padding: 16px 24px !important;
    margin: 0 !important;
    font-size: 16px !important;
    font-weight: 500 !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
    border-radius: 0 !important;
    display: flex !important;
    align-items: center;
    gap: 14px;
    box-sizing: border-box !important;
    transition: background 0.2s;
    position: relative;
    flex-shrink: 0;
  }
  /* Gi·ªØ ::after gradient cho active item - nh∆∞ng full width */
  .nav-menu .nav-link::after {
    content: "" !important;
    display: block !important;
    position: absolute !important;
    bottom: 0 !important;
    left: 0 !important;
    width: 0 !important;
    height: 2px !important;
    background: linear-gradient(90deg, #e50914, #ff0055) !important;
    transform: none !important;
    transition: width 0.3s !important;
  }
  .nav-menu .nav-link.active::after {
    width: 100% !important;
  }
  .nav-menu .nav-link:last-child {
    border-bottom: none !important;
  }
  .nav-menu .nav-link:hover,
  .nav-menu .nav-link.active {
    background: rgba(229, 9, 20, 0.1);
  }
  .nav-menu .nav-link i {
    font-size: 18px !important;
    width: 24px;
    text-align: center;
    flex-shrink: 0;
    color: var(--accent-primary, #e50914);
  }
  .nav-menu .nav-link.active i {
    color: #ff0055;
  }

  /* --- B. FIX L·ªñI BANNER (Thu g·ªçn l·∫°i) --- */
  .hero {
    min-height: auto !important;
    padding: 15px 15px 30px !important;
    /* üëá Th√™m 2 d√≤ng n√†y ƒë·ªÉ cƒÉn gi·ªØa n·ªôi dung theo chi·ªÅu d·ªçc n·∫øu banner th·∫•p */
    display: flex !important;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  .hero-content {
    margin-top: 0 !important;
    width: 100%;
    text-align: center; /* CƒÉn gi·ªØa n·ªôi dung */
  }
  /* Thu nh·ªè ch·ªØ ti√™u ƒë·ªÅ v√† m√¥ t·∫£ */
  .hero-title {
    font-size: 22px !important; /* Ch·ªØ nh·ªè l·∫°i */
    margin-bottom: 5px !important;
    line-height: 1.2 !important;
  }
  .hero-subtitle {
    font-size: 12px !important;
    margin-bottom: 15px !important;
    /* C·∫Øt b·ªõt n·∫øu d√†i qu√° 2 d√≤ng */
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  /* Thu nh·ªè n√∫t b·∫•m */
  .hero-actions .btn {
    padding: 8px 16px !important;
    font-size: 12px !important;
    height: 36px !important;
  }
  /* --- C. FIX L·ªñI FOOTER (G·ªåN G√ÄNG 2 C·ªòT) --- */
  .footer {
    padding: 20px 0 10px !important; /* Gi·∫£m kho·∫£ng c√°ch tr√™n d∆∞·ªõi */
  }

  .footer-content {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important; /* Chia th√†nh 2 c·ªôt ƒë·ªÅu nhau */
    gap: 15px !important;
    padding: 0 15px !important;
  }

  /* Logo & Gi·ªõi thi·ªáu: N·∫±m tr√™n c√πng, chi·∫øm tr·ªçn b·ªÅ ngang */
  .footer-section:nth-child(1) {
    grid-column: span 2;
    text-align: center;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    padding-bottom: 10px !important;
    margin-bottom: 0 !important;
  }
  /* ·∫®n d√≤ng m√¥ t·∫£ d√†i d√≤ng ƒëi cho g·ªçn */
  .footer-section:nth-child(1) p {
    display: none;
  }

  /* Ph·∫ßn Th·ªëng k√™: N·∫±m d∆∞·ªõi c√πng, chi·∫øm tr·ªçn b·ªÅ ngang */
  .stats-box {
    grid-column: span 2;
    margin-top: 0 !important;
    padding: 10px !important;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 8px;
  }

  /* Ch·ªânh font ch·ªØ footer nh·ªè l·∫°i */
  .footer-section h4 {
    font-size: 14px !important;
    margin-bottom: 10px !important;
  }
  .footer-section ul li {
    margin-bottom: 5px !important;
  }
  .footer-section ul li a {
    font-size: 12px !important;
  }

  /* --- C.5 FIX TRANG CHI TI·∫æT PHIM (MOVIE DETAIL PAGE) --- */
  .movie-detail {
    padding: 55px 12px 30px !important; /* Gi·∫£m padding tr√™n d∆∞·ªõi */
  }

  .movie-detail-header {
    display: grid !important;
    grid-template-columns: 1fr !important; /* ƒê·ªïi th√†nh 1 c·ªôt tr√™n mobile */
    gap: var(--spacing-md) !important; /* Gi·∫£m kho·∫£ng c√°ch */
    margin-bottom: var(--spacing-lg) !important;
  }

  .movie-poster {
    max-width: 100%;
    height: auto;
    margin: 0 auto;
  }

  .movie-poster img {
    width: 100%;
    height: auto;
    max-height: 400px;
    object-fit: cover;
  }

  .movie-info h1 {
    font-size: 20px !important; /* Gi·∫£m ƒë·ªô l·ªõn ti√™u ƒë·ªÅ */
    margin-bottom: 10px !important;
    margin-top: 5px;
  }

  .movie-meta {
    gap: 8px !important;
    margin-bottom: 10px !important;
    flex-wrap: wrap;
  }

  .movie-meta-item {
    font-size: 12px !important;
    gap: 4px !important;
  }

  .movie-meta-item i {
    font-size: 13px !important;
  }

  .movie-description {
    font-size: 13px !important;
    line-height: 1.6;
    margin-bottom: 15px !important;
  }

  .card-tags {
    gap: 5px !important;
    margin-bottom: 10px !important;
  }

  .card-tags .tag {
    font-size: 11px !important;
    padding: 4px 8px !important;
  }

  .movie-actions {
    flex-direction: column !important;
    gap: 8px !important;
  }

  .card-price {
    font-size: 18px !important;
  }

  .btn-lg {
    width: 100% !important;
    padding: 10px 15px !important;
    font-size: 14px !important;
  }

  /* Video player & Episodes */
  .video-container {
    margin-top: 20px !important;
  }

  .episodes-section {
    margin-top: 15px !important;
  }

  .episodes-list {
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)) !important;
    gap: 6px !important;
  }

  .episode-item {
    padding: 6px !important;
    font-size: 11px !important;
  }

  /* Comment Form & Rating Section */
  .comment-form {
    padding: 12px !important;
  }

  .rating-input {
    display: flex !important;
    flex-wrap: wrap !important; /* Cho ph√©p xu·ªëng d√≤ng */
    align-items: flex-start !important;
    gap: 6px !important;
    margin-bottom: 12px !important;
  }

  .rating-input label {
    width: 100%;
    display: block !important;
    margin-bottom: 6px !important;
    font-size: 13px !important;
  }

  .rating-stars {
    display: flex !important;
    flex-wrap: wrap !important; /* Cho ph√©p sao xu·ªëng d√≤ng */
    gap: 3px !important;
    order: 3; /* ƒê·ªÉ sao n·∫±m d∆∞·ªõi label */
  }

  .rating-stars i {
    font-size: 18px !important;
    margin: 0 !important;
  }

  .rating-value {
    font-size: 13px !important;
    margin-left: 0 !important;
    white-space: nowrap;
    order: 4;
    width: 100%;
    margin-top: 6px;
  }

  .comment-form .form-group {
    margin-bottom: 10px !important;
  }

  .form-textarea {
    font-size: 13px !important;
    min-height: 80px !important;
    padding: 8px !important;
  }

  /* --- D. L∆Ø·ªöI PHIM 4 C·ªòT --- */
  .movie-grid {
    grid-template-columns: repeat(4, 1fr) !important;
    gap: 6px !important;
  }
  .card-body {
    padding: 4px !important;
  }
  .card-title {
    font-size: 10px !important;
    margin-bottom: 2px !important;
  }
  .card-meta {
    font-size: 9px !important;
  }

  /* --- E. FIX POPUP TO QU√Å (Thu nh·ªè & Tinh ch·ªânh) --- */
  .movie-card-wrapper .movie-popup-nfx {
    display: none !important;
  }

  .movie-card-wrapper.active-mobile {
    z-index: 5000 !important;
    position: relative;
  }

  .movie-card-wrapper.active-mobile .movie-popup-nfx {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);

    /* üëá GI·∫¢M K√çCH TH∆Ø·ªöC POPUP */
    width: 225px !important;
    height: auto;
    z-index: 5001;
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.95);
    border: 1px solid var(--accent-primary);
    /* üëá QUAN TR·ªåNG: √âp n·ªÅn m√†u t·ªëi ƒë·ªÉ ch·ªØ tr·∫Øng lu√¥n n·ªïi b·∫≠t */
    background: #1f1f2e !important;
    color: #fff !important;
  }

  /* Font ch·ªØ Popup nh·ªè l·∫°i */
  .movie-card-wrapper.active-mobile .popup-header-img {
    height: 110px;
  }
  .movie-card-wrapper.active-mobile .popup-body {
    padding: 8px;
  }
  .movie-card-wrapper.active-mobile .popup-title-new {
    font-size: 13px;
    margin-bottom: 4px;
    line-height: 1.3;
  }
  .movie-card-wrapper.active-mobile .popup-meta-row {
    font-size: 9px;
    gap: 4px;
    margin-bottom: 6px;
  }
  .movie-card-wrapper.active-mobile .btn-popup-play {
    font-size: 11px !important;
    padding: 5px 10px;
    height: 28px;
  }
  .movie-card-wrapper.active-mobile .btn-popup-icon {
    width: 28px;
    height: 28px;
    font-size: 10px;
  }

  /* ·∫®n b·ªõt th√¥ng tin kh√¥ng c·∫ßn thi·∫øt tr√™n mobile cho g·ªçn */
  .movie-card-wrapper.active-mobile .popup-genres-row {
    display: none;
  }

  /* --- POPUP PHIM TH√îNG MINH (SMART POSITIONING) --- */
  
  .movie-card-wrapper {
      position: relative;
      z-index: 1; 
  }

  /* Khi active (ƒë∆∞·ª£c JS th√™m class): TƒÉng z-index cao nh·∫•t */
  .movie-card-wrapper.active-mobile {
      z-index: 10000 !important;
  }

  .movie-popup-nfx {
    position: absolute !important;
    top: 50% !important;
    
    /* M·∫∂C ƒê·ªäNH: CENTER */
    left: 50% !important;
    right: auto !important;
    transform: translate(-50%, -50%) scale(1.15) !important;
    
    width: 100% !important; 
    height: auto !important;
    min-height: 100% !important;
    
    z-index: 10001 !important;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.9) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    
    opacity: 0; 
    visibility: hidden;
    pointer-events: none;
    transition: opacity 0.2s, visibility 0.2s;
    
    display: flex !important;
    flex-direction: column !important;
    justify-content: center !important;
  }

  /* --- LOGIC HI·ªÇN TH·ªä D·ª∞A TR√äN JS --- */
  
  /* 1. M·ªü popup khi c√≥ class .active-mobile */
  .movie-card-wrapper.active-mobile .movie-popup-nfx {
      opacity: 1 !important;
      visibility: visible !important;
      pointer-events: auto !important;
  }

  /* 2. N·∫øu ·ªü l·ªÅ TR√ÅI -> M·ªü l·ªách sang PH·∫¢I */
  .movie-card-wrapper.popup-align-left .movie-popup-nfx {
      left: 0 !important;
      right: auto !important;
      transform: translate(0, -50%) scale(1.15) !important; /* Neo b√™n tr√°i, scale t·ª´ t√¢m tr√°i */
      transform-origin: left center !important;
  }

  /* 3. N·∫øu ·ªü l·ªÅ PH·∫¢I -> M·ªü l·ªách sang TR√ÅI */
  .movie-card-wrapper.popup-align-right .movie-popup-nfx {
      left: auto !important;
      right: 0 !important;
      transform: translate(0, -50%) scale(1.15) !important; /* Neo b√™n ph·∫£i, scale t·ª´ t√¢m ph·∫£i */
      transform-origin: right center !important;
  }
  
  /* ƒê·∫£m b·∫£o t∆∞∆°ng t√°c */
  .movie-popup-nfx button,
  .movie-popup-nfx a,
  .movie-popup-nfx i,
  .movie-popup-nfx .popup-actions {
      pointer-events: auto !important;
  }

  /* üëá FIX: Hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß th√¥ng tin trong Popup Mobile */
  .movie-popup-nfx .popup-genres-row,
  .movie-popup-nfx .popup-meta-row span {
      display: inline-block !important;
      visibility: visible !important;
      opacity: 1 !important;
      font-size: 11px; /* Ch·ªØ nh·ªè cho v·ª´a */
  }
  
  .movie-popup-nfx .popup-genres-row {
      margin-top: 4px;
      color: #ccc;
      display: flex !important;
      align-items: center;
      gap: 5px;
  }

  /* Fix Admin Sidebar */
  .admin-sidebar {
    display: block !important;
    position: fixed !important;
    top: 0;
    left: -100% !important;
    width: 260px !important;
    height: 100vh;
    z-index: 6000;
    transition: left 0.3s;
    background: var(--bg-secondary);
  }
  .admin-sidebar.active {
    left: 0 !important;
  }
  .admin-content {
    margin-left: 0 !important;
    padding: 15px;
  }
  #adminSidebarOverlay {
    z-index: 5999 !important;
  }
  /* --- G. FIX L·ªñI GIAO DI·ªÜN LIGHT MODE & TH·ªÇ LO·∫†I (M·ªöI) --- */

  /* 1. Fix Ti√™u ƒë·ªÅ phim kh√≥ ƒë·ªçc ·ªü Light Mode */
  [data-theme="light"] .card-title {
    color: #efef0f !important; /* Chuy·ªÉn th√†nh m√†u ƒëen ƒë·∫≠m */
    font-weight: 700 !important;
  }
  [data-theme="light"] .card-meta {
    color: #555 !important; /* M√†u ph·ª• chuy·ªÉn th√†nh x√°m ƒë·∫≠m */
  }
  /* L√†m n·ªÅn th·∫ª phim ·ªü Lightmode s√°ng h∆°n ch√∫t ƒë·ªÉ t√°ch bi·ªát */
  [data-theme="light"] .movie-card-static {
    background: #fff !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  /* 2. Fix Th·∫ª Th·ªÉ Lo·∫°i b·ªã k√©o d√†i (D√πng selector m·∫°nh ƒë·ªÉ √©p v·ªÅ 2 c·ªôt) */
  div#categoriesList {
    grid-template-columns: repeat(2, 1fr) !important; /* √âP C·ª®NG 2 C·ªòT */
    gap: 12px !important;
    display: grid !important;
  }

  /* Reset th·∫ª th·ªÉ lo·∫°i ƒë·ªÉ n√≥ n·∫±m ngang (d·∫°ng vi√™n thu·ªëc), kh√¥ng b·ªã d√†i th√≤ng */
  div#categoriesList .category-card-pro {
    width: 100% !important;
    aspect-ratio: 2.5 / 1 !important; /* T·ªâ l·ªá ch·ªØ nh·∫≠t ngang (R·ªông 2.5 : Cao 1) */
    min-height: unset !important;
    height: auto !important;
    padding: 10px !important;

    /* Flex ƒë·ªÉ icon v√† ch·ªØ n·∫±m ngang */
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: flex-start !important;
  }

  /* Ch·ªânh n·ªôi dung b√™n trong n·∫±m ngang */
  div#categoriesList .cat-content {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    text-align: left !important;
    width: 100%;
    gap: 10px !important;
  }

  /* Icon nh·ªè l·∫°i v√† n·∫±m b√™n tr√°i */
  div#categoriesList .cat-icon-box {
    width: 32px !important;
    height: 32px !important;
    margin-bottom: 0 !important; /* B·ªè margin d∆∞·ªõi c≈© */
    flex-shrink: 0;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  div#categoriesList .cat-icon-box i {
    font-size: 14px !important;
  }

  /* Ch·ªØ ti√™u ƒë·ªÅ n·∫±m b√™n ph·∫£i icon */
  div#categoriesList .cat-title {
    font-size: 13px !important;
    margin: 0 !important;
    text-transform: uppercase;
    font-weight: 800;
    line-height: 1.2;
    width: auto !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    flex: 1 !important;
  }

  /* ·∫®n d√≤ng ph·ª• 'Kh√°m ph√° ngay' cho g·ªçn */
  div#categoriesList .cat-subtitle {
    display: none !important;
  }
  /* --- G. FIX GIAO DI·ªÜN LIGHT MODE & POPUP (FINAL) --- */

  /* 1. TH·∫∫ PHIM ·ªû NGO√ÄI (N·ªÅn tr·∫Øng -> Ch·ªØ ƒêen) */
  [data-theme="light"] .card-title {
    color: #ffeb3b !important; /* M√†u ƒëen tuy·ªÅn cho d·ªÖ ƒë·ªçc */
    font-weight: 700 !important;
  }
  [data-theme="light"] .card-meta {
    color: #ec3434 !important;
    font-weight: 600 !important;
  }
  [data-theme="light"] .movie-card-static {
    background: #fff !important;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    border: 1px solid #ddd !important;
  }

  /* 2. POPUP CHI TI·∫æT (Lu√¥n n·ªÅn t·ªëi -> Ch·ªØ V√†ng) */
  .movie-card-wrapper.active-mobile .movie-popup-nfx {
    background: #1f1f2e !important; /* Lu√¥n gi·ªØ n·ªÅn t·ªëi cho d·ªãu m·∫Øt */
    color: #fff !important;
    border: 1px solid var(--accent-primary) !important;
  }

  /* üëá TI√äU ƒê·ªÄ TRONG POPUP: M√ÄU V√ÄNG R·ª∞C R·ª† */
  .movie-card-wrapper.active-mobile .popup-title-new {
    color: #ffeb3b !important; /* M√†u v√†ng chanh si√™u n·ªïi */
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8); /* B√≥ng ƒëen gi√∫p ch·ªØ c√†ng n·ªïi h∆°n */
    font-weight: 800 !important;
  }

  /* C√°c th√¥ng s·ªë kh√°c trong Popup (NƒÉm, Th·ªùi l∆∞·ª£ng...) m√†u tr·∫Øng s√°ng */
  .movie-card-wrapper.active-mobile .popup-meta-row span {
    color: #0fceeb !important;
  }

  /* Fix l·∫°i c√°c n√∫t tr√≤n trong popup cho d·ªÖ nh√¨n */
  .movie-card-wrapper.active-mobile .btn-popup-icon {
    background: rgba(255, 255, 255, 0.15) !important;
    color: #fff !important;
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
  }
  /* --- I. FIX MENU USER (V11 - T√ÅCH BI·ªÜT S·ªê D∆Ø V√Ä N√öT N·∫†P) --- */

  /* 1. KHUNG MENU (N·ªÅn ƒêen chu·∫©n Dark Mode) */
  [data-theme="light"] .user-dropdown,
  [data-theme="light"] .profile-dropdown,
  [data-theme="light"] #userMenu,
  [data-theme="light"] #userDropdown {
    background-color: #1f1f2e !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    color: #ffffff !important;
  }

  /* 2. [QUAN TR·ªåNG] RESET "S·ªê D∆Ø 0 C" V·ªÄ TRONG SU·ªêT */
  /* T√¨m t·∫•t c·∫£ th·∫ª span/div ch·ª©a s·ªë d∆∞ v√† x√≥a n·ªÅn tr·∫Øng ƒëi */
  [data-theme="light"] .user-dropdown span,
  [data-theme="light"] .user-dropdown div,
  [data-theme="light"] .user-dropdown b,
  [data-theme="light"] .user-dropdown strong {
    background-color: transparent !important; /* X√≥a n·ªÅn tr·∫Øng sai */
    color: #ffffff !important; /* Ch·ªØ tr·∫Øng */
    border: none !important;
    box-shadow: none !important;
  }

  /* 3. [QUAN TR·ªåNG] CH·ªà T√î N·ªÄN TR·∫ÆNG CHO N√öT LINK "N·∫†P" */
  /* Ch·ªâ t√°c ƒë·ªông v√†o th·∫ª a (ƒë∆∞·ªùng d·∫´n) ho·∫∑c button nh·ªè */
  [data-theme="light"] .user-dropdown a:not(.btn-block):not(.w-full),
  [data-theme="light"] .user-dropdown button.btn-sm {
    background-color: #ffffff !important; /* üëâ N·ªÅn TR·∫ÆNG */
    color: #0ea5e9 !important; /* üëâ Ch·ªØ XANH (Blue) */

    border-radius: 50px !important;
    padding: 4px 12px !important; /* TƒÉng padding ch√∫t cho ƒë·∫πp */
    font-size: 11px !important;
    font-weight: 800 !important;
    margin-left: 10px !important;
    display: inline-block !important;
    text-decoration: none !important;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2) !important;
    border: none !important;
    opacity: 1 !important;
    visibility: visible !important;
  }

  /* 4. KH√îI PH·ª§C N√öT TO "N√ÇNG C·∫§P NGAY" (M√†u ƒë·ªè) */
  [data-theme="light"] .user-dropdown button.w-full,
  [data-theme="light"] .user-dropdown .btn-block {
    background: linear-gradient(135deg, #e50914 0%, #ff0055 100%) !important;
    color: #ffffff !important;
    box-shadow: 0 4px 15px rgba(229, 9, 20, 0.3) !important;
    border: none !important;
  }

  /* --- J. FIX TR√ÄN GRID (Watch Party & Admin) --- */
  .party-grid,
  .stats-grid {
    grid-template-columns: 1fr !important;
  }
  .party-container {
    padding: 15px !important;
  }

  /* 5. TAG VIP (V√†ng) */
  [data-theme="light"] .user-dropdown .vip-tag,
  [data-theme="light"] .user-dropdown span.vip-tag {
    background: #ffeb3b !important; /* M√†u v√†ng */
    color: #000 !important; /* Ch·ªØ ƒëen */
  }

  /* 6. DARK MODE (Gi·ªØ nguy√™n) */
  [data-theme="dark"] .user-dropdown,
  [data-theme="dark"] .profile-dropdown {
    background-color: #1f1f2e !important;
    color: #ffffff !important;
  }
}

/* L√†m g·ªçn hi·ªÉn th·ªã b√¨nh lu·∫≠n tr√™n mobile */
.comment-item {
  padding: 10px 8px !important;
  gap: 8px !important;
  border-radius: 10px !important;
  min-height: unset !important;
}
.comment-avatar {
  width: 32px !important;
  height: 32px !important;
  font-size: 15px !important;
  border-radius: 50% !important;
}
.comment-content {
  font-size: 13px !important;
}
.comment-header {
  flex-direction: column !important;
  align-items: flex-start !important;
  gap: 2px !important;
  margin-bottom: 2px !important;
}
.comment-author {
  font-size: 13px !important;
  font-weight: 700 !important;
}
.comment-rating {
  font-size: 12px !important;
  gap: 2px !important;
  margin-top: 0 !important;
}
.comment-text {
  font-size: 13px !important;
  margin-bottom: 2px !important;
  line-height: 1.5 !important;
}
.comment-time {
  font-size: 11px !important;
  color: #aaa !important;
  margin-bottom: 2px !important;
}
.comment-actions {
  margin-top: 4px !important;
  display: flex !important;
  justify-content: flex-start !important;
}

/* ============================================
   FIX L·ªñI CH√ÇN TRANG & TH·ªêNG K√ä LIGHT MODE (GLOBAL - PC & MOBILE)
   ============================================ */

/* 1. ƒê·ªïi m√†u khung th·ªëng k√™ sang x√°m nh·∫°t ƒë·ªÉ n·ªïi b·∫≠t tr√™n n·ªÅn tr·∫Øng */
[data-theme="light"] .stats-box {
  background: #f3f4f6 !important;
  border: 1px solid #d1d5db !important;
}

/* 2. ƒê·ªïi m√†u ch·ªØ "ƒêang Online", "T·ªïng truy c·∫≠p"... sang m√†u ƒëen */
[data-theme="light"] .stat-label {
  color: #374151 !important;
}

/* 3. ƒê·ªïi m√†u CON S·ªê (174, 15 ph√∫t...) sang m√†u ƒëen ƒë·∫≠m */
[data-theme="light"] .stat-value {
  color: #000000 !important;
  font-weight: 800 !important;
}

/* 4. ƒê·ªïi m√†u c√°c Icon trong th·ªëng k√™ sang m√†u ƒê·ªè cho ƒë·∫πp */
[data-theme="light"] .stats-box i {
  color: #e50914 !important;
}

/* 5. Ti·ªán th·ªÉ s·ª≠a lu√¥n m√†u ti√™u ƒë·ªÅ Footer (Kh√°m Ph√°, H·ªó Tr·ª£...) sang ƒëen */
[data-theme="light"] .footer-section h4 {
  color: #111 !important;
}
/* S·ª≠a m√†u c√°c ƒë∆∞·ªùng link b√™n d∆∞·ªõi */
[data-theme="light"] .footer-section ul li a {
  color: #555 !important;
}
/* ======================================================
   HI·ªÜU ·ª®NG VOICE CHAT (GLOBAL - √ÅP D·ª§NG CHO M·ªåI M√ÄN H√åNH)
   ====================================================== */
.is-speaking .avatar-img,
img.avatar-img.is-speaking {
  border: 3px solid #00ff6a !important; /* Xanh l√° d·∫° quang */
  box-shadow: 0 0 15px #00ff6a !important; /* Ph√°t s√°ng m·∫°nh */
  transform: scale(1.15) !important;
  transition: all 0.15s cubic-bezier(0.175, 0.885, 0.32, 1.275) !important;
  z-index: 100 !important;
}

/* Hi·ªáu ·ª©ng rung n·ªÅn cho c·∫£ d√≤ng t√™n */
.member-item.is-speaking {
  background: rgba(0, 255, 106, 0.15) !important;
  border: 1px solid rgba(0, 255, 106, 0.3) !important;
}
/* ======================================================
   WATCH PARTY: FINAL FIX (MOBILE & LIGHT MODE)
   ====================================================== */

/* --- 1. M·∫∂C ƒê·ªäNH (DARK MODE) - KH√îI PH·ª§C M√ÄU CH·ªÆ --- */
/* V√¨ ƒë√£ x√≥a style c·ª©ng trong JS, ta ph·∫£i ƒë·ªãnh nghƒ©a m√†u ·ªü ƒë√¢y */
.member-name {
  color: #ffffff; /* M·∫∑c ƒë·ªãnh ch·ªØ tr·∫Øng */
  font-weight: 700;
  font-size: 13px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 120px;
  display: inline-block;
  vertical-align: middle;
}
.member-role {
  font-size: 11px;
  color: #aaaaaa; /* M·∫∑c ƒë·ªãnh x√°m */
  display: block;
}
.member-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px;
  margin-bottom: 5px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
}
.member-avatar {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  object-fit: cover;
}
.member-actions {
  display: flex;
  align-items: center;
  gap: 5px;
}

/* --- 2. LIGHT MODE (CH·∫æ ƒê·ªò S√ÅNG) --- */
/* D√πng body[data-theme="light"] ƒë·ªÉ tƒÉng ƒë·ªô ∆∞u ti√™n (Specificity) */

/* Sidebar & Tab */

body[data-theme="light"] .room-tab {
  color: #65676b !important;
}
body[data-theme="light"] .room-tab.active {
  color: #0084ff !important;
  border-bottom-color: #0084ff !important;
  background: rgba(0, 132, 255, 0.05) !important;
}

/* Danh s√°ch th√†nh vi√™n (Light Mode) */
body[data-theme="light"] .member-item {
  background-color: #ffffff !important;
  border: 1px solid #e4e6eb !important;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}
body[data-theme="light"] .member-name {
  color: #050505 !important; /* üëâ CH·ªÆ ƒêEN */
}
body[data-theme="light"] .member-role {
  color: #65676b !important; /* üëâ ROLE X√ÅM ƒê·∫¨M */
}
body[data-theme="light"] .member-item:hover {
  background-color: #f2f2f2 !important;
}

/* Chat Input (Light Mode) */
body[data-theme="light"] .chat-input-area {
  background: #ffffff !important;
  border-top: 1px solid #e4e6eb !important;
}
body[data-theme="light"] #chatInput {
  background: #f0f2f5 !important;
  color: #050505 !important;
  border: 1px solid #ddd !important;
}
body[data-theme="light"] #chatInput::placeholder {
  color: #65676b !important;
}

/* Tin nh·∫Øn Chat (Light Mode) */
body[data-theme="light"] .chat-msg:not(.me) .text {
  background-color: #e4e6eb !important;
  color: #050505 !important;
}
body[data-theme="light"] .chat-msg.me .text {
  background-color: #0084ff !important;
  color: #ffffff !important;
}
body[data-theme="light"] .chat-msg .author {
  color: #65676b !important;
}

/* ======================================================
   WATCH PARTY: B·∫¢N FULL (LAYOUT MOBILE + LIGHT MODE + HOST)
   ====================================================== */

/* --- 1. M√ÄU CH·ªÆ CH·ª®C DANH (HOST/MEMBER) --- */
.role-host {
  color: #f1c40f;
  font-weight: 800;
}
.role-member {
  color: #aaa;
}

/* --- 2. LIGHT MODE (CH·∫æ ƒê·ªò S√ÅNG - QUAN TR·ªåNG) --- */
/* D√πng selector m·∫°nh ƒë·ªÉ ƒë√® m·ªçi th·ª© */

[data-theme="light"] .room-tab {
  color: #555 !important;
}
[data-theme="light"] .room-tab.active {
  color: #0084ff !important;
  background: rgba(0, 132, 255, 0.1) !important;
}

/* Danh s√°ch th√†nh vi√™n (Light Mode) */
[data-theme="light"] .member-item {
  background-color: #ffffff !important;
  border: 1px solid #eee !important;
  color: #333 !important;
}
[data-theme="light"] .member-name {
  color: #000000 !important; /* Ch·ªØ ƒëen tuy·ªÅn */
}
[data-theme="light"] .role-host {
  color: #d35400 !important; /* Cam ƒë·∫≠m (thay v√¨ v√†ng ch√≥i) */
}
[data-theme="light"] .role-member {
  color: #666 !important;
}

/* TIN NH·∫ÆN CHAT (Light Mode - Fix l·ªói ch·ªØ v√†ng n·ªÅn tr·∫Øng) */
[data-theme="light"] .chat-msg:not(.me) .text {
  background-color: #e4e6eb !important;
  color: #050505 !important;
  font-weight: 500;
}
[data-theme="light"] .chat-msg.me .text {
  background-color: #0084ff !important;
  color: #ffffff !important;
}
[data-theme="light"] .chat-msg .author {
  color: #666 !important;
}

/* TIN NH·∫ÆN H·ªÜ TH·ªêNG (Light Mode) */
[data-theme="light"] .chat-msg.system {
  color: #92400e !important; /* N√¢u ƒë·∫≠m */
  background-color: #fef3c7 !important; /* V√†ng nh·∫°t */
  border: 1px solid #fcd34d !important;
  border-radius: 5px !important;
  padding: 5px 10px !important;
  font-weight: 600 !important;
  text-shadow: none !important; /* B·ªè b√≥ng ch·ªØ */
  width: 90%;
  margin: 10px auto;
}

/* √î nh·∫≠p li·ªáu (Light Mode) */
[data-theme="light"] .chat-input-area {
  background: #fff !important;
  border-top: 1px solid #ddd !important;
}
[data-theme="light"] #chatInput {
  background: #f0f2f5 !important;
  color: #000 !important;
  border: 1px solid #ccc !important;
}

/* --- FIX N√öT LOGIN B·ªä ·∫®N NH·∫¶M (QUAN TR·ªåNG) --- */
/* √âp hi·ªÉn th·ªã l·∫°i n√∫t Login ngay c·∫£ khi n√≥ d√≠nh class .hidden */
#authContainer:has(#userMenuTrigger:not(.hidden)) #loginBtn.hidden {
  display: flex !important;
  visibility: visible !important;
  opacity: 1 !important;
  width: 30px !important;
  height: 30px !important;
  pointer-events: auto !important;
  cursor: pointer !important;
  position: static !important;
}
/* =================================================================
   MASTER FIX V9 (GRID SYSTEM - KH√îNG TH·ªÇ V·ª† GIAO DI·ªÜN)
   ================================================================= */

@media (max-width: 1024px) {
  /* --- 1. C·∫§U H√åNH CHUNG --- */
  html,
  body {
    background: var(--bg-primary) !important;
    /* Reset l·∫°i m·ªçi thu·ªôc t√≠nh position c√≥ th·ªÉ g√¢y l·ªói */
    position: static !important;
    width: 100% !important;
  }
  .party-container,
  .main-content {
    padding: 0 !important;
    margin: 0 !important;
    width: 100% !important;
    max-width: none !important;
  }
  /* ƒê·∫¢M B·∫¢O .page KH√îNG B·ªä NAV CHE - √ÅP D·ª§NG M·ªåI ORIENTATION */
  .page {
    padding-top: 60px !important;
    min-height: 100vh !important;
    background: var(--bg-primary) !important;
  }
  #partyRoom.page {
    padding-top: 0 !important;
  }

  /* ============================================================
       MODE 1: D·ªåC (PORTRAIT) - CH·ªà C·∫¶N CU·ªòN ƒê∆Ø·ª¢C L√Ä OK
       ============================================================ */
  @media (orientation: portrait) {
    /* X√ìA KHO·∫¢NG TR·ªêNG PH√çA TR√äN - Ch·ªâ c·∫ßn ƒë·∫©y xu·ªëng ƒë√∫ng chi·ªÅu cao nav */
    .page {
      padding-top: 60px !important;
      margin-top: 0 !important;
      min-height: 100vh !important;
      background: var(--bg-primary) !important;
    }
    #partyRoom.page {
      padding-top: 0 !important;
      margin-top: 0 !important;
      min-height: 80vh !important;
    }

    /* M·∫∂C ƒê·ªäNH: C√ÅC TRANG CU·ªòN B√åNH TH∆Ø·ªúNG */
    html,
    body {
      overflow-y: auto !important;
      overflow-x: hidden !important;
      height: auto !important;
      position: static !important;
      width: 100% !important;
    }
    /* CH·ªà KH√ìA CU·ªòN KHI TRONG PH√íNG WATCH PARTY */
    body.watch-party-active {
      overflow: hidden !important;
      height: 100dvh !important;
      position: fixed !important;
      width: 100% !important;
    }

    #partyRoom {
      position: fixed !important;
      top: 60px !important; /* Ngay d∆∞·ªõi thanh nav */
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100% !important;
      background: var(--bg-primary) !important;
      padding: 0 !important;
      margin: 0 !important;
      overflow: hidden !important;
      z-index: 100 !important;
    }

    /* CONTAINER CH√çNH - FLEX D·ªåC, FILL H·∫æT VIEWPORT */
    .room-layout {
      display: flex !important;
      flex-direction: column !important;
      grid-template-columns: none !important;
      width: 100% !important;
      height: 100% !important;
      gap: 0 !important;
      padding: 0 !important;
      overflow: hidden !important;
    }

    /* Header - N·∫∞M ƒê·∫¶U TI√äN trong .room-main (flex column) */
    .room-header-bar {
      display: flex !important;
      flex-wrap: wrap !important;
      justify-content: center !important;
      align-items: center !important;
      background: var(--bg-secondary) !important;
      padding: 6px 10px !important;
      margin: 0 !important;
      border-radius: 0 !important;
      width: 100% !important;
      order: -1 !important; /* Lu√¥n ƒë·ª©ng ƒë·∫ßu trong flex */
      z-index: 100 !important;
      position: relative !important;
      min-height: 40px !important;
      flex-shrink: 0 !important;
    }
    #roomTitleDisplay {
      width: 100% !important;
      text-align: center !important;
      order: -1 !important;
      font-weight: 700 !important;
      margin-bottom: 4px !important;
      font-size: 14px !important;
      color: var(--text-primary) !important;
      display: block !important;
    }
    .room-meta {
      display: flex !important;
      gap: 8px !important;
      justify-content: center !important;
    }

    /* Video D·ªçc */
    .room-main,
    .party-main {
      width: 100% !important;
      display: flex !important;
      flex-direction: column !important;
      background: var(--bg-primary) !important;
      position: relative !important;
      margin: 0 !important;
      padding: 0 !important;
      order: 2 !important;
      flex-shrink: 0 !important;
      /* KH√îNG d√πng aspect-ratio ·ªü ƒë√¢y v√¨ #hostControls c≈©ng n·∫±m trong room-main */
    }
    /* PLAYER WRAPPER - T·ª∂ L·ªÜ 16:9 */
    .room-player-wrapper {
      width: 100% !important;
      aspect-ratio: 16/9 !important;
      position: relative !important;
      flex-shrink: 0 !important;
      margin: 0 !important;
      padding: 0 !important;
      border-radius: 0 !important;
      min-height: unset !important;
      height: auto !important;
      overflow: hidden !important;
      order: 1 !important; /* Sau header-bar */
    }
    #partyPlayer {
      width: 100% !important;
      height: 100% !important;
      display: block !important;
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
    }

    /* Controls D·ªçc - NGAY SAU VIDEO trong .room-main */
    #hostControls,
    .room-controls {
      width: 100% !important;
      overflow-x: auto !important;
      white-space: nowrap !important;
      background: var(--bg-secondary) !important;
      padding: 8px 10px !important;
      display: flex !important;
      gap: 8px !important;
      order: 2 !important; /* Sau player-wrapper(1) trong .room-main flex */
      flex-shrink: 0 !important;
      position: relative !important;
      transform: none !important;
      border-top: 1px solid var(--border-color) !important;
    }

    /* Chat D·ªçc - FILL ƒê√öNG PH·∫¶N C√íN L·∫†I GI·ªÆA CONTROLS V√Ä INPUT */
    .room-sidebar,
    .party-sidebar {
      width: 100% !important;
      display: flex !important;
      flex-direction: column !important;
      flex: 1 !important;
      min-height: 0 !important; /* Quan tr·ªçng: cho ph√©p co l·∫°i */
      background: var(--bg-primary) !important;
      border: none !important;
      border-radius: 0 !important;
      order: 4 !important;
      overflow: hidden !important;
      padding-bottom: 50px !important; /* Ch·ª´a ch·ªó cho chat-input fixed */
    }

    .room-tabs {
      height: 42px !important;
      min-height: 42px !important;
      background: var(--bg-secondary) !important;
      flex-shrink: 0 !important;
      display: flex !important;
      visibility: visible !important;
      opacity: 1 !important;
      border-top: 2px solid #7c3aed !important;
      border-bottom: 1px solid var(--border-color) !important;
      z-index: 10 !important;
      position: relative !important;
    }
    .room-tab {
      flex: 1 !important;
      font-size: 14px !important;
      padding: 8px 14px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      color: #999 !important;
      font-weight: 700 !important;
      background: transparent !important;
      border: none !important;
      border-bottom: 2px solid transparent !important;
      cursor: pointer !important;
    }
    .room-tab.active {
      color: #fff !important;
      border-bottom-color: #7c3aed !important;
      background: rgba(124, 58, 237, 0.1) !important;
    }
    #chatMessages,
    #memberList {
      flex: 1 !important;
      overflow-y: auto !important;
      padding: 10px !important;
      min-height: 0 !important; /* Quan tr·ªçng: cho ph√©p co l·∫°i trong flex */
    }
    /* √î nh·∫≠p tin nh·∫Øn - C·ªê ƒê·ªäNH D∆Ø·ªõI M√ÄN H√åNH MOBILE */
    .chat-input-area {
      position: fixed !important;
      bottom: 0 !important;
      left: 0 !important;
      right: 0 !important;
      padding: 8px 10px !important;
      background: var(--bg-secondary) !important;
      border-top: 1px solid var(--border-color) !important;
      z-index: 9500 !important;
      display: flex !important;
      align-items: center !important;
      gap: 6px !important;
    }
    .room-tab-content {
      display: none !important;
      flex-direction: column !important;
      flex: 1 !important;
      overflow: hidden !important;
    }
    .room-tab-content.active {
      display: flex !important;
    }
  }

  /* ============================================================
   FIX L·ªñI XOAY NGANG (MOBILE LANDSCAPE) - UPDATE
   ============================================================ */
  @media (max-width: 1024px) and (orientation: landscape) {
    /* 0. CH·ªà X√ìA PADDING CHO WATCH PARTY (FULLSCREEN) */
    #partyRoom.page {
      padding-top: 0 !important;
      margin-top: 0 !important;
    }

    /* partyRoom ch·ªâ fixed full m√†n h√¨nh */
    #partyRoom {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      overflow: hidden !important;
      background: var(--bg-primary) !important;
      z-index: 9000 !important;
      padding: 0 !important;
      margin: 0 !important;
      display: block !important;
    }

    /* CONTAINER CH√çNH - GRID 75% VIDEO / 25% CHAT */
    .room-layout {
      display: grid !important;
      grid-template-columns: 75% 25% !important;
      width: 100% !important;
      height: 100% !important;
      gap: 0 !important;
      padding: 0 !important;
      overflow: hidden !important;
    }

    /* C·ªòT TR√ÅI: VIDEO */
    .room-main,
    .party-main {
      grid-column: 1 !important;
      grid-row: 1 !important;
      width: 100% !important;
      height: 100% !important;
      position: relative !important;
      display: flex !important;
      flex-direction: column !important;
      align-items: center !important;
      justify-content: center !important;
      overflow: hidden !important;
      background: var(--bg-primary) !important;
      max-height: 100vh !important;
      padding: 0 !important;
      margin: 0 !important;
      aspect-ratio: unset !important;
    }

    /* Video player - L·∫§P ƒê·∫¶Y KHUNG */
    #partyPlayer {
      width: 100% !important;
      height: 100% !important;
      max-height: 100vh !important;
      object-fit: contain !important;
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
    }

    /* C·ªòT PH·∫¢I: KHUNG CHAT 25% */
    .room-sidebar,
    .party-sidebar {
      grid-column: 2 !important;
      grid-row: 1 !important;
      width: 100% !important;
      height: 100% !important;
      max-height: 100vh !important;
      background: var(--bg-secondary) !important;
      border-left: 1px solid var(--border-color) !important;
      display: flex !important;
      flex-direction: column !important;
      z-index: 9100 !important;
      overflow: hidden !important;
      border-radius: 0 !important;
      min-height: unset !important;
      min-width: unset !important;
    }

    /* Header bar g·ªçn h∆°n */
    .room-header-bar {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      width: 100% !important;
      height: 32px !important;
      min-height: 32px !important;
      background: linear-gradient(
        to bottom,
        rgba(0, 0, 0, 0.95),
        rgba(0, 0, 0, 0.5)
      ) !important;
      padding: 2px 8px !important;
      justify-content: flex-start !important;
      align-items: center !important;
      gap: 6px !important;
      z-index: 9050 !important;
      pointer-events: none;
      flex-wrap: nowrap !important;
      margin: 0 !important;
    }
    .room-header-bar > * {
      pointer-events: auto !important;
      transform: scale(0.85);
    }
    .room-header-bar .btn {
      padding: 2px 8px !important;
      font-size: 10px !important;
    }
    #roomTitleDisplay {
      font-size: 11px !important;
      margin: 0 4px !important;
      white-space: nowrap !important;
      overflow: hidden !important;
      text-overflow: ellipsis !important;
      max-width: 100px !important;
      display: block !important;
    }
    .room-meta {
      display: flex !important;
      gap: 4px !important;
      align-items: center !important;
    }
    .room-meta .btn {
      padding: 2px 6px !important;
      font-size: 9px !important;
    }
    .live-badge {
      font-size: 8px !important;
      padding: 1px 4px !important;
    }

    /* Video container */
    .room-player-wrapper {
      width: 100% !important;
      height: 100% !important;
      min-height: unset !important;
      margin: 0 !important;
      padding: 0 !important;
      position: relative !important;
      top: 0 !important;
      left: 0 !important;
      border-radius: 0 !important;
    }

    /* Chat tabs - hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß */
    .room-tabs {
      height: 30px !important;
      flex-shrink: 0 !important;
      display: flex !important;
    }
    .room-tab {
      font-size: 11px !important;
      padding: 0 6px !important;
      display: flex !important;
      align-items: center !important;
    }
    #chatMessages {
      font-size: 11px !important;
      flex: 1 !important;
      overflow-y: auto !important;
      min-height: 0 !important;
    }

    /* Chat input - TRONG SIDEBAR, KH√îNG FIXED */
    .chat-input-area {
      position: static !important;
      padding: 8px !important;
      background: var(--bg-secondary) !important;
      border-top: 1px solid var(--border-color) !important;
      flex-shrink: 0 !important;
      display: flex !important;
      align-items: center !important;
      gap: 6px !important;
    }
    .chat-input-area input {
      flex: 1 !important;
      min-width: 0 !important;
      padding: 6px 10px !important;
      font-size: 12px !important;
    }
    .chat-input-area button {
      width: 30px !important;
      height: 30px !important;
      flex-shrink: 0 !important;
    }

    /* N√öT ƒêI·ªÄU KHI·ªÇN - TO H∆†N V√Ä V·ªä TR√ç H·ª¢P L√ù */
    #hostControls,
    .room-controls {
      position: absolute !important;
      bottom: 8px !important;
      left: 50% !important;
      transform: translateX(-50%) scale(0.85) !important;
      width: auto !important;
      min-width: 50% !important;
      max-width: 70% !important;
      background: rgba(0, 0, 0, 0.9) !important;
      border-radius: 25px !important;
      padding: 6px 16px !important;
      gap: 8px !important;
      display: flex !important;
      justify-content: center !important;
      align-items: center !important;
      white-space: nowrap !important;
      z-index: 9050 !important;
      margin: 0 !important;
    }

    /* N√∫t b·∫•m ƒëi·ªÅu khi·ªÉn - TO H∆†N */
    #hostControls button,
    .room-controls button {
      padding: 6px 14px !important;
      font-size: 12px !important;
      height: 32px !important;
      min-width: unset !important;
    }
  }

  /* Fix n√∫t Login */
  #authContainer #loginBtn.hidden {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: static !important;
  }
}

/* ============================================================
   MOBILE LANDSCAPE - VIDEO PLAYER FULLSCREEN FIX
   ============================================================ */
@media (max-width: 768px) and (orientation: landscape) {
  /* Video Container - Full chi·ªÅu cao v√† b·ªè aspect-ratio */
  .video-container,
  .video-container.landscape-mode {
    padding-top: 0 !important;
    height: 100vh !important;
    width: 100vw !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: auto !important;
    bottom: 0 !important;
    border-radius: 0 !important;
    z-index: 99999 !important;
    background: #000 !important;
    display: flex !important;
    flex-direction: column !important;
  }

  /* Video player l·∫•p ƒë·∫ßy container - QUAN TR·ªåNG */
  .video-container iframe,
  .video-container video {
    width: 100% !important;
    flex: 1 !important;
    height: auto !important;
    min-height: 0 !important;
    object-fit: contain !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
  }

  /* Custom Controls - Lu√¥n hi·ªÉn th·ªã v√† ·ªü d∆∞·ªõi c√πng */
  .custom-video-controls {
    opacity: 1 !important;
    display: flex !important;
    position: absolute !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    padding: 15px 20px 25px !important;
    background: linear-gradient(to top, rgba(0,0,0,0.95) 40%, transparent) !important;
    z-index: 100 !important;
    flex-shrink: 0 !important;
  }

  /* Center Controls Overlay - CƒÉn gi·ªØa */
  .center-controls-overlay {
    display: flex !important;
    opacity: 1 !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    z-index: 99 !important;
  }

  /* TƒÉng k√≠ch th∆∞·ªõc c√°c n√∫t ƒëi·ªÅu khi·ªÉn */
  .control-btn {
    width: 40px !important;
    height: 40px !important;
    font-size: 18px !important;
    padding: 8px !important;
  }

  /* Progress bar l·ªõn h∆°n ƒë·ªÉ d·ªÖ ch·∫°m */
  .video-progress-container {
    height: 10px !important;
    margin: 10px 0 !important;
  }

  /* Time display */
  .time-display {
    font-size: 13px !important;
    color: #fff !important;
  }

  /* Settings menu kh√¥ng b·ªã che */
  .settings-menu,
  .settings-submenu {
    max-height: 60vh !important;
    overflow-y: auto !important;
    z-index: 200 !important;
  }

  /* ·∫®n c√°c ph·∫ßn t·ª≠ kh√¥ng c·∫ßn thi·∫øt trong landscape */
  .movie-detail-page > .section,
  .episodes-section,
  .comments-section,
  .related-movies {
    display: none !important;
  }

  /* ƒê·∫£m b·∫£o video container l√† ph·∫ßn t·ª≠ hi·ªÉn th·ªã duy nh·∫•t */
  .movie-detail-page {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    overflow: hidden !important;
    background: #000 !important;
    z-index: 99998 !important;
  }
}

/* ============================================================
   TABLET LANDSCAPE - VIDEO PLAYER FULLSCREEN FIX (768px - 1024px)
   ============================================================ */
@media (min-width: 769px) and (max-width: 1024px) and (orientation: landscape) {
  /* Video Container - Full chi·ªÅu cao */
  .video-container,
  .video-container.landscape-mode {
    padding-top: 0 !important;
    height: 100vh !important;
    width: 100vw !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: auto !important;
    bottom: 0 !important;
    border-radius: 0 !important;
    z-index: 99999 !important;
    background: #000 !important;
    display: flex !important;
    flex-direction: column !important;
  }

  /* Video player l·∫•p ƒë·∫ßy container */
  .video-container iframe,
  .video-container video {
    width: 100% !important;
    flex: 1 !important;
    height: auto !important;
    min-height: 0 !important;
    object-fit: contain !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
  }

  /* Custom Controls - Lu√¥n hi·ªÉn th·ªã */
  .custom-video-controls {
    opacity: 1 !important;
    display: flex !important;
    position: absolute !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    padding: 15px 20px 25px !important;
    background: linear-gradient(to top, rgba(0,0,0,0.95) 40%, transparent) !important;
    z-index: 100 !important;
    flex-shrink: 0 !important;
  }

  /* Center Controls Overlay */
  .center-controls-overlay {
    display: flex !important;
    opacity: 1 !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    z-index: 99 !important;
  }

  /* ·∫®n c√°c ph·∫ßn t·ª≠ kh√¥ng c·∫ßn thi·∫øt */
  .movie-detail-page > .section,
  .episodes-section,
  .comments-section,
  .related-movies {
    display: none !important;
  }

  /* Movie detail page fullscreen */
  .movie-detail-page {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    overflow: hidden !important;
    background: #000 !important;
    z-index: 99998 !important;
  }
}